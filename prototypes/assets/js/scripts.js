const initTheme=()=>{const btn=document.querySelector('[data-action="toggle-theme"]');if(!btn)return;btn.addEventListener('click',()=>{const next=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';document.documentElement.setAttribute('data-theme',next);localStorage.setItem('theme',next)})
const saved=localStorage.getItem('theme');if(saved)document.documentElement.setAttribute('data-theme',saved)}
const initForm=()=>{const form=document.querySelector('form[data-contact]');if(!form)return;const honeypot=form.querySelector('input[name="website"]');const started=Date.now();const status=form.querySelector('[data-status]');form.addEventListener('submit',(e)=>{e.preventDefault();status.textContent='';const name=form.querySelector('input[name="name"]').value.trim();const email=form.querySelector('input[name="email"]').value.trim();const message=form.querySelector('textarea[name="message"]').value.trim();const elapsed=(Date.now()-started)/1000;const emailOk=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);if(honeypot&&honeypot.value){status.textContent='Submission blocked.';return}if(elapsed<3){status.textContent='Please wait a moment before submitting.';return}if(!name||!emailOk||message.length<10){status.textContent='Please complete all fields correctly.';return}const body=encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\n${message}`);const subject=encodeURIComponent('Portfolio Contact');const href=`mailto:ni2faa@gmail.com?subject=${subject}&body=${body}`;window.location.href=href;status.textContent='Opening email app...';})}
document.addEventListener('DOMContentLoaded',()=>{initTheme();initForm();})